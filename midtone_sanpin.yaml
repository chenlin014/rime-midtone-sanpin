zhuyin_to_midtone:
  __append:
    # 尖音
    - derive/j([iv])/z$1/
    - derive/q([iv])/c$1/
    - derive/x([iv])/s$1/
    # 團音
    - xform/j([iv])/g$1/
    - xform/q([iv])/k$1/
    - xform/x([iv])/h$1/

    # ㄧㄛ同ㄧㄡ
    - derive/iU/io/
    # ㄧㄟ同ㄧㄝ
    - derive/iE/iI/
    # ㄨㄝ同ㄨㄟ
    - derive/uI/uE/
    # ㄨㄡ同ㄨㄛ
    - derive/uo/uU/
    # ㄩㄟ同ㄩㄝ
    - derive/vE/vI/

    # 聲母名調區
    # 用於輸入知吃等空韻字和的了等常用字
    - derive/([bpmf])o(?=\d)/$1名/
    - derive/([dtnlgkh])e(?=\d)/$1名/
    - xform/([ZCSrzcs])(?=\d)/$1名/

    # 把聲調放在聲母和韻母之間
    - xform/([iuvaoeEAIOUMNKGR]+)([1-5])$/$2$1/
    # 無聲有介
    - xform/^([1-5][iuv][aoeEAIOUMNKGR]+)$/無$1/
    # 無聲無介
    - xform/^([1-5])([aoeEAIOUMNKGR]+)$/$2韻$1/
    # 聲介
    - xform/^([bpmfdtnlgkhjqxZCSrzcs][1-5][iuv])$/$1无/
    # 唯介母
    - xform/^([1-5][iuv])$/介$1/
    # 換成眞注音
    - 'xlit|bpmfdtnlgkhjqxZCSrzcsiuvaoeEAIOUMNKGR|ㄅㄆㄇㄈㄉㄊㄋㄌㄍㄎㄏㄐㄑㄒㄓㄔㄕㄖㄗㄘㄙㄧㄨㄩㄚㄛㄜㄝㄞㄟㄠㄡㄢㄣㄤㄥㄦ|'

    # 介調組合的鍵位
    # 上排
    - xform/韻1/甲/
    - xform/韻2/乙/
    - xform/韻3/丙/
    - xform/韻4/丁/
    - xform/韻5/戊/
    - xform/5ㄨ/己/
    - xform/4ㄨ/庚/
    - xform/3ㄨ/辛/
    - xform/2ㄨ/壬/
    - xform/1ㄨ/癸/
    # 下排
    - xform/1ㄩ/子/
    - xform/2ㄩ/丑/
    - xform/3ㄩ/寅/
    - xform/4ㄩ/卯/
    - xform/5ㄩ/辰/
    - xform/名5/巳/
    - xform/名4/午/
    - xform/名3/未/
    - xform/名2/申/
    - xform/名1/酉/
    # 中排
    - xform/1ㄧ/壹/
    - xform/2ㄧ/貳/
    - xform/3ㄧ/叄/
    - xform/4ㄧ/肆/
    - xform/5ㄧ/伍/
    - xlit|54321|陸柒捌玖拾|

# == 鍵盤佈局 ==

use_qwerty_layout:
  __append:
    # 聲母布局
    - xlit|ㄖㄔㄎㄊ＊＊ㄆㄘㄙ|qwertyuio|
    - xlit|ㄕㄓㄍㄉㄈㄏㄅㄗㄌ|asdfghjkl|
    - xlit|＊介無ㄋ＊＊ㄇ|zxcvbnm|
    # 韻母布局
    - xlit|ㄞㄝㄛ|uio|
    - xlit|ㄣㄥㄤㄢㄦㄜㄚㄟㄡ无|asdfghjkl;|
    - xlit|ㄠ|m|
    # QWERTY
    - xlit|甲乙丙丁戊己庚辛壬癸|qwertyuiop|
    - xlit|壹貳叄肆伍陸柒捌玖拾|asdfghjkl;|
    - xlit|子丑寅卯辰巳午未申酉|zxcvbnm,./|

use_wikibase_layout:
  __append:
    # 聲母布局
    - xlit|ㄖㄔㄎㄊ＊＊ㄆㄘ|zvkl|'ug|
    - xlit|ㄕㄓㄍㄉㄈㄏㄅㄗㄌㄙ|sroedhaint|
    - xlit|＊介無ㄋ＊＊ㄇ|xwfc,.mybq|
    # 韻母布局
    - xlit|ㄞㄝㄛ|ugp|
    - xlit|ㄣㄥㄤㄢㄦㄜㄚㄟㄡ无|sroedhaint|
    - xlit|ㄠ|m|
    # WIKIBASE
    - xlit|甲乙丙丁戊己庚辛壬癸|zvkl'?ugpj|
    - xlit|壹貳叄肆伍陸柒捌玖拾|sroedhaint|
    - xlit|子丑寅卯辰巳午未申酉|xwfc,.mybq|
